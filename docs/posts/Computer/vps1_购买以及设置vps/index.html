<!DOCTYPE html>











<html lang="en-us">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  
  <title>VPS1:购买以及设置 - caiyy17</title>

  
  
  <meta name="description" content="前言 对于一个准备完计算机的喜欢折腾的学生来说，拥有一台自己的服务器是十分有必要的，在那上面，可以干许许多多事情。
Github 学生包 相信大家对 github 都不陌生，但 github 上除了代码管理和社区之外，github 提供的学生包也是个非常不错的东西。学生包获取方法就根据提示一步一步来就行，需要学校邮箱。
其中个人暂时用到的有：
 DigitalOcean 上 50 刀的代金券 AWS 上 150 刀代金券 Namecheap 一年的免费.me 域名  这些基本都和 VPS 有关，本文主要介绍 DO 上的 VPS，这个也比较简单。
DigitalOcean 注册 DO，需要用 paypal 或者信用卡向其中充值 5 美金，就可以注册完成了。完成后，在 DO 网站中输入学生包优惠码，会发现账户变成了 55 美金，这样就可以用基础套餐 11 个月了。
然后添加 Droplets，我使用的是 centos，最基础的套餐（5 刀一个月），用校园网的话记得勾选 ipv6，然后 添加一个 sshkey （这一步很重要，不然申请完成后需要再设置这个 VPS 很多步）
然后就完成了基本操作，可以使用电脑连接服务器了。
设置防火墙 DO 提供了十分方便的防火墙设置，可以控制进出开放的端口，然后你可以只开你需要的端口，可以免去在 VPS 里面设置防火墙，甚至可以把里面的防火墙关了。
这里一般会设置几套防火墙，每一套之间是叠加的，就是最终开放的端口是所有防火墙组的开发端口的并集。可以有前段防火墙开发基本端口，然后 ss 防火墙专门开发 socks 协议使用的端口&hellip;&hellip;这个就看自己组合了。
我这边是开了 ssh 使用的 22 端口；网站的 443 和 1080 端口；以及 ss 或者 v2ray 使用的端口（自己设置）。如果不用网站，可以将 443 或者 1080 作为翻墙端口。" />
  <meta name="author" content="" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://caiyy17.github.io/app.min.css" />

  
  <link rel="preload stylesheet" as="style" href="https://caiyy17.github.io/an-old-hope.min.css" />
  <script
    defer
    src="https://caiyy17.github.io/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  <link rel="preload" as="image" href="https://caiyy17.github.io/theme.png" />

  

  
  <link rel="icon" href="https://caiyy17.github.io/favicon.ico" />
  <link rel="apple-touch-icon" href="https://caiyy17.github.io/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.97.3" />

  
  

  
  
  
  
  
  
  
  
  
  <meta property="og:title" content="VPS1:购买以及设置" />
<meta property="og:description" content="前言 对于一个准备完计算机的喜欢折腾的学生来说，拥有一台自己的服务器是十分有必要的，在那上面，可以干许许多多事情。
Github 学生包 相信大家对 github 都不陌生，但 github 上除了代码管理和社区之外，github 提供的学生包也是个非常不错的东西。学生包获取方法就根据提示一步一步来就行，需要学校邮箱。
其中个人暂时用到的有：
 DigitalOcean 上 50 刀的代金券 AWS 上 150 刀代金券 Namecheap 一年的免费.me 域名  这些基本都和 VPS 有关，本文主要介绍 DO 上的 VPS，这个也比较简单。
DigitalOcean 注册 DO，需要用 paypal 或者信用卡向其中充值 5 美金，就可以注册完成了。完成后，在 DO 网站中输入学生包优惠码，会发现账户变成了 55 美金，这样就可以用基础套餐 11 个月了。
然后添加 Droplets，我使用的是 centos，最基础的套餐（5 刀一个月），用校园网的话记得勾选 ipv6，然后 添加一个 sshkey （这一步很重要，不然申请完成后需要再设置这个 VPS 很多步）
然后就完成了基本操作，可以使用电脑连接服务器了。
设置防火墙 DO 提供了十分方便的防火墙设置，可以控制进出开放的端口，然后你可以只开你需要的端口，可以免去在 VPS 里面设置防火墙，甚至可以把里面的防火墙关了。
这里一般会设置几套防火墙，每一套之间是叠加的，就是最终开放的端口是所有防火墙组的开发端口的并集。可以有前段防火墙开发基本端口，然后 ss 防火墙专门开发 socks 协议使用的端口&hellip;&hellip;这个就看自己组合了。
我这边是开了 ssh 使用的 22 端口；网站的 443 和 1080 端口；以及 ss 或者 v2ray 使用的端口（自己设置）。如果不用网站，可以将 443 或者 1080 作为翻墙端口。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://caiyy17.github.io/posts/computer/vps1_%E8%B4%AD%E4%B9%B0%E4%BB%A5%E5%8F%8A%E8%AE%BE%E7%BD%AEvps/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-30T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-09-30T00:00:00+00:00" />


  
  <meta itemprop="name" content="VPS1:购买以及设置">
<meta itemprop="description" content="前言 对于一个准备完计算机的喜欢折腾的学生来说，拥有一台自己的服务器是十分有必要的，在那上面，可以干许许多多事情。
Github 学生包 相信大家对 github 都不陌生，但 github 上除了代码管理和社区之外，github 提供的学生包也是个非常不错的东西。学生包获取方法就根据提示一步一步来就行，需要学校邮箱。
其中个人暂时用到的有：
 DigitalOcean 上 50 刀的代金券 AWS 上 150 刀代金券 Namecheap 一年的免费.me 域名  这些基本都和 VPS 有关，本文主要介绍 DO 上的 VPS，这个也比较简单。
DigitalOcean 注册 DO，需要用 paypal 或者信用卡向其中充值 5 美金，就可以注册完成了。完成后，在 DO 网站中输入学生包优惠码，会发现账户变成了 55 美金，这样就可以用基础套餐 11 个月了。
然后添加 Droplets，我使用的是 centos，最基础的套餐（5 刀一个月），用校园网的话记得勾选 ipv6，然后 添加一个 sshkey （这一步很重要，不然申请完成后需要再设置这个 VPS 很多步）
然后就完成了基本操作，可以使用电脑连接服务器了。
设置防火墙 DO 提供了十分方便的防火墙设置，可以控制进出开放的端口，然后你可以只开你需要的端口，可以免去在 VPS 里面设置防火墙，甚至可以把里面的防火墙关了。
这里一般会设置几套防火墙，每一套之间是叠加的，就是最终开放的端口是所有防火墙组的开发端口的并集。可以有前段防火墙开发基本端口，然后 ss 防火墙专门开发 socks 协议使用的端口&hellip;&hellip;这个就看自己组合了。
我这边是开了 ssh 使用的 22 端口；网站的 443 和 1080 端口；以及 ss 或者 v2ray 使用的端口（自己设置）。如果不用网站，可以将 443 或者 1080 作为翻墙端口。"><meta itemprop="datePublished" content="2018-09-30T00:00:00+00:00" />
<meta itemprop="dateModified" content="2018-09-30T00:00:00+00:00" />
<meta itemprop="wordCount" content="206">
<meta itemprop="keywords" content="VPS,safety," />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="VPS1:购买以及设置"/>
<meta name="twitter:description" content="前言 对于一个准备完计算机的喜欢折腾的学生来说，拥有一台自己的服务器是十分有必要的，在那上面，可以干许许多多事情。
Github 学生包 相信大家对 github 都不陌生，但 github 上除了代码管理和社区之外，github 提供的学生包也是个非常不错的东西。学生包获取方法就根据提示一步一步来就行，需要学校邮箱。
其中个人暂时用到的有：
 DigitalOcean 上 50 刀的代金券 AWS 上 150 刀代金券 Namecheap 一年的免费.me 域名  这些基本都和 VPS 有关，本文主要介绍 DO 上的 VPS，这个也比较简单。
DigitalOcean 注册 DO，需要用 paypal 或者信用卡向其中充值 5 美金，就可以注册完成了。完成后，在 DO 网站中输入学生包优惠码，会发现账户变成了 55 美金，这样就可以用基础套餐 11 个月了。
然后添加 Droplets，我使用的是 centos，最基础的套餐（5 刀一个月），用校园网的话记得勾选 ipv6，然后 添加一个 sshkey （这一步很重要，不然申请完成后需要再设置这个 VPS 很多步）
然后就完成了基本操作，可以使用电脑连接服务器了。
设置防火墙 DO 提供了十分方便的防火墙设置，可以控制进出开放的端口，然后你可以只开你需要的端口，可以免去在 VPS 里面设置防火墙，甚至可以把里面的防火墙关了。
这里一般会设置几套防火墙，每一套之间是叠加的，就是最终开放的端口是所有防火墙组的开发端口的并集。可以有前段防火墙开发基本端口，然后 ss 防火墙专门开发 socks 协议使用的端口&hellip;&hellip;这个就看自己组合了。
我这边是开了 ssh 使用的 22 端口；网站的 443 和 1080 端口；以及 ss 或者 v2ray 使用的端口（自己设置）。如果不用网站，可以将 443 或者 1080 作为翻墙端口。"/>

  
  
</head>


  <body class="not-ready" data-menu="false">
    <header class="header">
  
  <p class="logo">
    <a class="site-name" href="https://caiyy17.github.io">caiyy17</a><a class="btn-dark"></a>
  </p>
  

  <script>
    let bodyClx = document.body.classList;
    let btnDark = document.querySelector('.btn-dark');
    let sysDark = window.matchMedia('(prefers-color-scheme: dark)');
    let darkVal = localStorage.getItem('dark');

    let setDark = (isDark) => {
      bodyClx[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark ? 'yes' : 'no');
    };

    setDark(darkVal ? darkVal === 'yes' : sysDark.matches);
    requestAnimationFrame(() => bodyClx.remove('not-ready'));

    btnDark.addEventListener('click', () => setDark(!bodyClx.contains('dark')));
    sysDark.addEventListener('change', (event) => setDark(event.matches));
  </script>

  
  

  
</header>


    <main class="main">

<article class="post-single">
  <header class="post-title">
    <p>
      
      <time>Sep 30, 2018</time>
      
      
    </p>
    <h1>VPS1:购买以及设置</h1>
  </header>
  <section class="post-content"><h1 id="前言">前言</h1>
<p>对于一个准备完计算机的喜欢折腾的学生来说，拥有一台自己的服务器是十分有必要的，在那上面，可以干许许多多事情。</p>
<h1 id="github-学生包">Github 学生包</h1>
<p>相信大家对 github 都不陌生，但 github 上除了代码管理和社区之外，github 提供的学生包也是个非常不错的东西。学生包获取方法就根据提示一步一步来就行，需要学校邮箱。</p>
<p>其中个人暂时用到的有：</p>
<ul>
<li>DigitalOcean 上 50 刀的代金券</li>
<li>AWS 上 150 刀代金券</li>
<li>Namecheap 一年的免费.me 域名</li>
</ul>
<p>这些基本都和 VPS 有关，本文主要介绍 DO 上的 VPS，这个也比较简单。</p>
<h1 id="digitalocean">DigitalOcean</h1>
<p>注册 DO，需要用 paypal 或者信用卡向其中充值 5 美金，就可以注册完成了。完成后，在 DO 网站中输入学生包优惠码，会发现账户变成了 55 美金，这样就可以用基础套餐 11 个月了。</p>
<p>然后添加 Droplets，我使用的是 centos，最基础的套餐（5 刀一个月），用校园网的话记得勾选 ipv6，然后 <strong>添加一个 sshkey</strong> （这一步很重要，不然申请完成后需要再设置这个 VPS 很多步）</p>
<p>然后就完成了基本操作，可以使用电脑连接服务器了。</p>
<h2 id="设置防火墙">设置防火墙</h2>
<p>DO 提供了十分方便的防火墙设置，可以控制进出开放的端口，然后你可以只开你需要的端口，可以免去在 VPS 里面设置防火墙，甚至可以把里面的防火墙关了。</p>
<p>这里一般会设置几套防火墙，每一套之间是叠加的，就是最终开放的端口是所有防火墙组的开发端口的并集。可以有前段防火墙开发基本端口，然后 ss 防火墙专门开发 socks 协议使用的端口&hellip;&hellip;这个就看自己组合了。</p>
<p>我这边是开了 ssh 使用的 22 端口；网站的 443 和 1080 端口；以及 ss 或者 v2ray 使用的端口（自己设置）。如果不用网站，可以将 443 或者 1080 作为翻墙端口。</p>
<h2 id="连接服务器">连接服务器</h2>
<p>Windows 可以用 putty，使用 ssh 登陆，然后在 ssh 设置中添加自己的私钥，就可以连了。</p>
<p>Mac 的话直接用系统自带的终端</p>
<pre tabindex="0"><code>ssh -p [port] [user]@[ip]
</code></pre><h1 id="用户设置">用户设置</h1>
<p>默认登陆的是 root 用户，但是这样是不安全的，我们可以建立管理员用户，然后只允许管理员用户切换到 root，再禁止 root 的 ssh 登陆，这样我们钥使用 root 就只能先 ssh 登陆管理员账户，然后再使用密码切换到 root。</p>
<ol>
<li>
<p>新建一个用户</p>
<pre tabindex="0"><code>useradd [user]
</code></pre></li>
<li>
<p>将用户添加至管理员组</p>
<pre tabindex="0"><code>usermod –g wheel [user]
</code></pre></li>
<li>
<p>修改/etc/pam.d/su 配置</p>
<p>去掉这行的注释，就完成了禁止普通用户切换 root</p>
<pre tabindex="0"><code>#auth required pam_wheel.so use_uid
</code></pre></li>
<li>
<p>修改/etc/ssh/sshd_config</p>
<p>将 PermitRootLogin 选项改为</p>
<pre tabindex="0"><code>PermitRootLogin no
</code></pre></li>
</ol>
<p>这样就禁止了 root 直接登陆。</p>
<h1 id="ssh-设置">ssh 设置</h1>
<p>这个在用户文件夹下的.ssh/authorized_keys 中可以添加 ssh 的公钥，然后就可以使用不同的私钥链接服务器了，然是保险起见得保证 <strong>从修改文件到确认可以用修改后的钥匙登陆前</strong> 最好都保持有一个终端窗口连在服务器上，这样玩意出问题还可以再次改那个文件。</p>
<h1 id="ok">OK</h1>
<p>然后就可以愉快地在服务器中安装各种软件了&hellip;&hellip;附上一些现成代码</p>
<pre tabindex="0"><code>useradd -g wheel admin
passwd admin

echo &#34;&#34; &gt;&gt; /etc/pam.d/su
echo &#34;auth required pam_wheel.so use_uid&#34; &gt;&gt; /etc/pam.d/su

echo &#34;&#34; &gt;&gt; /etc/ssh/sshd_config
echo &#34;RSAAuthentication yes&#34; &gt;&gt; /etc/ssh/sshd_config
echo &#34;PubkeyAuthentication yes&#34; &gt;&gt; /etc/ssh/sshd_config
echo &#34;PermitRootLogin no&#34; &gt;&gt; /etc/ssh/sshd_config
echo &#34;PasswordAuthentication no&#34; &gt;&gt; /etc/ssh/sshd_config
service sshd restart

su admin
cd ~
mkdir .ssh
chmod 755 .ssh
cd .ssh
touch authorized_keys
echo [your_public_keys] &gt; authorized_keys
chmod 644 authorized_keys
</code></pre></section>

  
  
  <footer class="post-tags">
     
    <a href="https://caiyy17.github.io/tags/vps">VPS</a>
     
    <a href="https://caiyy17.github.io/tags/safety">safety</a>
    
  </footer>
  

  
  
  
  <nav class="post-nav">
    
    <a class="prev" href="https://caiyy17.github.io/posts/computer/linux%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/"><span>←</span><span>Linux1:基本命令</span></a>
     
    <a class="next" href="https://caiyy17.github.io/posts/computer/vps2_socks%E5%8D%8F%E8%AE%AE%E4%B8%8Ess%E8%AE%BE%E7%BD%AE/"><span>VPS2:socks协议以及ss设置</span><span>→</span></a>
    
  </nav>
  

  
  
</article>

</main>

    <footer class="footer">
  <p>&copy; 2022 <a href="https://caiyy17.github.io">caiyy17</a></p>
  <p>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</p>
  <p>
    <a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Paper 5.1</a>
  </p>
</footer>

  </body>
</html>
